apply plugin: 'cobertura'
apply plugin: 'coveralls'

dependencies {
    compile project(':plog-api')

    compile "io.netty:netty-codec:${nettyVersion}"

    compile('org.apache.kafka:kafka_2.10:0.8.1') {
        exclude module: 'zookeeper'
        exclude module: 'zkclient'
        exclude module: 'jmxri'
        exclude module: 'jmxtools'
        exclude module: 'slf4j-simple'
    }
    compile 'org.xerial.snappy:snappy-java:1.1.0.1'

    // needed to create a Kafka producer
    testCompile 'log4j:log4j:1.2.17'
}

test {
    // gradle screws up SLF4J for that test. Use IntelliJ :)
    exclude 'com/airbnb/plog/EndOfPipeline*'
}

cobertura.coverageFormats = ['html', 'xml']

buildscript {
    repositories { jcenter() }
    dependencies {
        classpath 'net.saliman:gradle-cobertura-plugin:2.2.4'
        classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:0.2.5'
    }
}
